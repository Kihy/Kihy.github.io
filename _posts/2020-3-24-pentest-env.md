---
layout: post
title:  "Penetration Testing Environment"
author: "Ke He"
description: "Creating pentest environment in virtualbox"
---

### Network setup

The network consists of 3 machines: Kali, metasploitable 2 and ubuntu 16.04. Kali is the attacker, ubuntu 26.04 is the victim for https attacks(e.g. HULK) since metasploitable dont really support that, and metaploitable is the vitim for all other attacks.

Ubuntu 16.04 is running [apache2 with https enabled](https://www.maketecheasier.com/apache-server-ssl-support/)

The network is host-only network created in virtualbox, Kali is running wireshark to capture packets.

### CICFlowMeter

After wireshark captures pcap files, the tool used for generating attributes is [CICFlowMeter](https://github.com/ahlashkari/CICFlowMeter). However the online version fails to respond, and the jar file that is built using maven runs, but doesn't generate any output.

Upon running the gradle built version, it comes with a command line interface as well as GUI, and running the command line interface shows there is an error:

    Exception in thread "main" java.lang.UnsatisfiedLinkError: com.slytechs.library.NativeLibrary.dlopen(Ljava/lang/String;)J
    at com.slytechs.library.NativeLibrary.dlopen(Native Method)
    at com.slytechs.library.NativeLibrary.(Unknown Source)
    at com.slytechs.library.JNILibrary.(Unknown Source)
    at com.slytechs.library.JNILibrary.loadLibrary(Unknown Source)
    at com.slytechs.library.JNILibrary.register(Unknown Source)
    at com.slytechs.library.JNILibrary.register(Unknown Source)
    at com.slytechs.library.JNILibrary.register(Unknown Source)
    at org.jnetpcap.Pcap.(Unknown Source)
    at cic.cs.unb.ca.jnetpcap.PacketReader.config(PacketReader.java:58)
    at cic.cs.unb.ca.jnetpcap.PacketReader.(PacketReader.java:52)
    at cic.cs.unb.ca.ifm.Cmd.readPcapFile(Cmd.java:128)
    at cic.cs.unb.ca.ifm.Cmd.main(Cmd.java:80)

This was due to jnetpcap not being installed correctly, and can be fixed by first installing libpcap-dev on linux and then install jnetpcap with mvn as described in README.md and then build the project with gradle.

Now that CICFlowMeter is installed, we can start experimenting with attacks.
